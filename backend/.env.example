# Private RAG Copilot - Backend Environment Configuration
# Copy this file to .env and fill in your actual values

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
APP_NAME="Private RAG Copilot"
APP_VERSION="1.0.0"
DEBUG=false
ENVIRONMENT=development  # development | staging | production

# =============================================================================
# API SETTINGS
# =============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_PREFIX=/api/v1

# =============================================================================
# CORS SETTINGS
# =============================================================================
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# =============================================================================
# OPENAI SETTINGS (REQUIRED)
# =============================================================================
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=sk-your-openai-api-key-here

# Model Configuration
OPENAI_MODEL=gpt-4-turbo-preview  # or gpt-4, gpt-3.5-turbo
OPENAI_EMBEDDING_MODEL=text-embedding-3-small  # or text-embedding-3-large
OPENAI_TEMPERATURE=0.1
OPENAI_MAX_TOKENS=1000

# =============================================================================
# VECTOR DATABASE SETTINGS - SUPABASE (Recommended)
# =============================================================================
USE_SUPABASE=true

# Supabase Project Settings
# Get these from: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your-supabase-anon-or-service-key

# Direct PostgreSQL Connection (for pgvector operations)
# Get these from: https://supabase.com/dashboard/project/_/settings/database
POSTGRES_HOST=db.your-project-id.supabase.co
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-postgres-password
POSTGRES_DB=postgres

# =============================================================================
# VECTOR DATABASE SETTINGS - PINECONE (Alternative)
# =============================================================================
USE_PINECONE=false

# Pinecone Settings (if not using Supabase)
# Get these from: https://app.pinecone.io/
PINECONE_API_KEY=your-pinecone-api-key
PINECONE_ENVIRONMENT=your-pinecone-environment  # e.g., us-west1-gcp
PINECONE_INDEX_NAME=rag-copilot

# =============================================================================
# DOCUMENT PROCESSING SETTINGS
# =============================================================================
CHUNK_SIZE=1000          # Characters per chunk
CHUNK_OVERLAP=200        # Overlap between chunks

# =============================================================================
# RETRIEVAL SETTINGS
# =============================================================================
RETRIEVAL_TOP_K=20       # Initial retrieval count
RERANK_TOP_K=3           # Final count after reranking
ENABLE_RERANKING=false   # Enable reranking (Week 3)
SIMILARITY_THRESHOLD=0.7 # Minimum similarity score (0.0 - 1.0)

# =============================================================================
# AUTHENTICATION SETTINGS
# =============================================================================
# SECURITY WARNING: Change JWT_SECRET_KEY in production!
# Generate a secure key with: openssl rand -hex 32
JWT_SECRET_KEY=CHANGE_ME_IN_PRODUCTION_USE_STRONG_RANDOM_KEY
JWT_ALGORITHM=HS256
JWT_EXPIRY_MINUTES=1440  # 24 hours

# =============================================================================
# LOGGING SETTINGS
# =============================================================================
LOG_LEVEL=INFO           # DEBUG | INFO | WARNING | ERROR | CRITICAL
LOG_FORMAT=json          # json | console

# =============================================================================
# RATE LIMITING (Week 6)
# =============================================================================
RATE_LIMIT_ENABLED=false
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

# =============================================================================
# METRICS SETTINGS
# =============================================================================
ENABLE_METRICS=true
METRICS_LOG_QUERIES=true

# =============================================================================
# NOTES
# =============================================================================
# 1. Never commit the .env file to version control
# 2. Use strong, unique values for JWT_SECRET_KEY in production
# 3. Choose either Supabase OR Pinecone as your vector store
# 4. For local development, you may need to set DEBUG=true
# 5. Ensure CORS_ORIGINS includes your frontend URL
